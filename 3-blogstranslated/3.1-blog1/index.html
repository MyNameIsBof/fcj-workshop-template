<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="thienlh@thienlu.com"><link rel=icon href=../../images/favicon.png type=image/png><title>Blog 1 :: Internship Report</title>
<link href=../../css/nucleus.css?1765288608 rel=stylesheet><link href=../../css/fontawesome-all.min.css?1765288608 rel=stylesheet><link href=../../css/hybrid.css?1765288608 rel=stylesheet><link href=../../css/featherlight.min.css?1765288608 rel=stylesheet><link href=../../css/perfect-scrollbar.min.css?1765288608 rel=stylesheet><link href=../../css/auto-complete.css?1765288608 rel=stylesheet><link href=../../css/atom-one-dark-reasonable.css?1765288608 rel=stylesheet><link href=../../css/theme.css?1765288608 rel=stylesheet><link href=../../css/hugo-theme.css?1765288608 rel=stylesheet><link href=../../css/theme-workshop.css?1765288608 rel=stylesheet><script src=../../js/jquery-3.3.1.min.js?1765288608></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../3-blogstranslated/3.1-blog1/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../js/lunr.min.js?1765288608></script><script type=text/javascript src=../../js/auto-complete.js?1765288608></script><script type=text/javascript>var baseurl="https://mynameisbof.github.io/fcj-workshop-template/"</script><script type=text/javascript src=../../js/search.js?1765288608></script></div><div class=highlightable><ul class=topics><li data-nav-id=/1-worklog/ title=Worklog class=dd-item><a href=../../1-worklog/><b>1. </b>Worklog
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/1-worklog/1.1-week1/ title="Week 1 Worklog" class=dd-item><a href=../../1-worklog/1.1-week1/><b>1.1. </b>Week 1 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.2-week2/ title="Week 2 Worklog" class=dd-item><a href=../../1-worklog/1.2-week2/><b>1.2. </b>Week 2 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.3-week3/ title="Week 3 Worklog" class=dd-item><a href=../../1-worklog/1.3-week3/><b>1.3. </b>Week 3 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.4-week4/ title="Week 4 Worklog" class=dd-item><a href=../../1-worklog/1.4-week4/><b>1.4. </b>Week 4 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.5-week5/ title="Week 5 Worklog" class=dd-item><a href=../../1-worklog/1.5-week5/><b>1.5. </b>Week 5 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.6-week6/ title="Week 6 Worklog" class=dd-item><a href=../../1-worklog/1.6-week6/><b>1.6. </b>Week 6 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.7-week7/ title="Week 7 Worklog" class=dd-item><a href=../../1-worklog/1.7-week7/><b>1.7. </b>Week 7 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.8-week8/ title="Week 8 Worklog" class=dd-item><a href=../../1-worklog/1.8-week8/><b>1.8. </b>Week 8 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.9-week9/ title="Week 9 Worklog" class=dd-item><a href=../../1-worklog/1.9-week9/><b>1.9. </b>Week 9 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.10-week10/ title="Week 10 Worklog" class=dd-item><a href=../../1-worklog/1.10-week10/><b>1.10. </b>Week 10 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.11-week11/ title="Week 11 Worklog" class=dd-item><a href=../../1-worklog/1.11-week11/><b>1.11. </b>Week 11 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.12-week12/ title="Week 12 Worklog" class=dd-item><a href=../../1-worklog/1.12-week12/><b>1.12. </b>Week 12 Worklog
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/2-proposal/ title=Proposal class=dd-item><a href=../../2-proposal/><b>2. </b>Proposal
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/ title="Translated Blogs" class="dd-item
parent"><a href=../../3-blogstranslated/><b>3. </b>Translated Blogs
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/3-blogstranslated/3.1-blog1/ title="Blog 1" class="dd-item
active"><a href=../../3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.2-blog2/ title="Blog 2" class=dd-item><a href=../../3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.3-blog3/ title="Blog 3" class=dd-item><a href=../../3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/4-eventparticipated/ title="Events Participated" class=dd-item><a href=../../4-eventparticipated/><b>4. </b>Events Participated
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/4-eventparticipated/4.1-event1/ title="Event 1" class=dd-item><a href=../../4-eventparticipated/4.1-event1/><b>4.1. </b>Event 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.2-event2/ title="Event 2" class=dd-item><a href=../../4-eventparticipated/4.2-event2/><b>4.2. </b>Event 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.3-event3/ title="Event 3" class=dd-item><a href=../../4-eventparticipated/4.3-event3/><b>4.3. </b>Event 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.4-event4/ title="Event 4" class=dd-item><a href=../../4-eventparticipated/4.4-event4/><b>4.4. </b>Event 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.5-event5/ title="Event 5" class=dd-item><a href=../../4-eventparticipated/4.5-event5/><b>4.5. </b>Event 5
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/ title=Workshop class=dd-item><a href=../../5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.1-workshop-overview/ title=Introduction class=dd-item><a href=../../5-workshop/5.1-workshop-overview/><b>5.1. </b>Introduction
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.2-prerequiste/ title="Prerequisites and Setup" class=dd-item><a href=../../5-workshop/5.2-prerequiste/><b>5.2. </b>Prerequisites and Setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-s3-vpc/ title="Create DynamoDB Table" class=dd-item><a href=../../5-workshop/5.3-s3-vpc/><b>5.3. </b>Create DynamoDB Table
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.3-s3-vpc/5.3.1-create-gwe/ title="Create a gateway endpoint" class=dd-item><a href=../../5-workshop/5.3-s3-vpc/5.3.1-create-gwe/><b>5.3.1 </b>Create a gateway endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-s3-vpc/5.3.2-test-gwe/ title="Test the Gateway Endpoint" class=dd-item><a href=../../5-workshop/5.3-s3-vpc/5.3.2-test-gwe/><b>5.3.2 </b>Test the Gateway Endpoint
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/5.4-s3-onprem/ title="Create Lambda Functions" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/><b>5.4. </b>Create Lambda Functions
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.1-prepare/ title="Prepare the environment" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.1-prepare/><b>5.4.1 </b>Prepare the environment
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/ title="Create an S3 Interface endpoint" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/><b>5.4.2 </b>Create an S3 Interface endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/ title="Test the Interface Endpoint" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/><b>5.4.3 </b>Test the Interface Endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/ title="On-premises DNS Simulation" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/><b>5.4.4 </b>On-premises DNS Simulation
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/5.5-policy/ title="Configure API Gateway" class=dd-item><a href=../../5-workshop/5.5-policy/><b>5.5. </b>Configure API Gateway
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.6-cleanup/ title="Clean up" class=dd-item><a href=../../5-workshop/5.6-cleanup/><b>5.6. </b>Clean up
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/6-self-evaluation/ title=Self-Assessment class=dd-item><a href=../../6-self-evaluation/><b>6. </b>Self-Assessment
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/7-feedback/ title="Sharing and Feedback" class=dd-item><a href=../../7-feedback/><b>7. </b>Sharing and Feedback
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://mynameisbof.github.io/fcj-workshop-template/3-blogstranslated/3.1-blog1/ selected>English</option><option id=vi value=https://mynameisbof.github.io/fcj-workshop-template/vi/3-blogstranslated/3.1-blog1/>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../>Internship Report</a> > <a href=../../3-blogstranslated/>Translated Blogs</a> > Blog 1</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#solution-overview>Solution overview</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#setting-up-amazon-bedrock-data-automation>Setting up Amazon Bedrock Data Automation</a></li><li><a href=#creating-websocket-and-orchestration-backend>Creating websocket and orchestration backend</a></li><li><a href=#configuring-amazon-cognito-user-pool>Configuring Amazon Cognito user pool</a></li><li><a href=#creating-the-web-application>Creating the web application</a></li><li><a href=#testing-the-web-application>Testing the web application</a></li><li><a href=#cleanup>Cleanup</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 1</h1><h1 id=orchestrating-document-processing-with-aws-appsync-events-and-amazon-bedrock>Orchestrating document processing with AWS AppSync Events and Amazon Bedrock</h1><p>by Mehdi Amrane on July 9, 2025 in Advanced (300), Amazon Bedrock, Amazon Cognito, AWS Amplify, AWS AppSync, AWS Lambda, AWS Step Functions, Serverless, Technical How-to Permalink Share</p><p>Many organizations implement intelligent document processing workflows to extract meaningful insights from an ever-increasing volume of unstructured content (such as insurance claims, loan applications, etc.). Traditionally, these processes require significant technical effort, as implementations often involve using multiple machine learning (ML) models and orchestrating complex workflows.</p><p>When organizations integrate these channels into customer-facing applications (such as web applications for customers to upload documents like insurance claims, loan approval documents, etc.), they aim to provide real-time insights to enhance end-user experience. These organizations also aim to operate and scale these workloads with minimal operational overhead and cost optimization. Additionally, these organizations need to implement common security measures such as identity and access management to ensure that only authenticated and authorized users are allowed to perform specific actions or access specific resources.</p><p>In this article, we introduce a solution that simplifies the creation of intelligent document processing workflows, with a web application that allows customers to upload files (documents and images) and gather insights from them (summarization, field extraction, and classification). This solution primarily uses serverless technology, including a websocket to receive real-time insights and provides many benefits, such as automatic scaling, built-in high availability, and a pay-per-use pricing model for cost optimization. The solution also includes an authentication layer and an authorization layer to manage identity and permissions.</p><h2 id=solution-overview>Solution overview</h2><p>In this post, we provide an overview of how the solution works and then describe how to set up the solution with the following services:</p><ul><li>Amazon Bedrock and Amazon Bedrock Data Automation to summarize the content of uploaded files (documents or images) and generate insights from them.</li><li>AWS Step Functions and AWS Lambda to orchestrate summarization and extraction operations, using Amazon Bedrock and Amazon Bedrock Data Automation.</li><li>AWS AppSync Events to create a serverless websocket for the web application to receive summarization and extraction insights in real time.</li><li>AWS Amplify to create and deploy the web application</li><li>Amazon EventBridge to trigger the orchestration workflow (using AWS Step Functions and AWS Lambda) when a new file is uploaded</li><li>Amazon Cognito to implement an identity platform (user directory management and authorization) for the web application.</li><li>Amazon Simple Storage Service (Amazon S3) to store uploaded files (for processing by the processing pipeline) and assets related to the web application.</li></ul><p>The solution architecture is illustrated in the following diagram:</p><p><strong>Step 1:</strong> User authenticates with the web application (hosted on AWS Amplify).</p><p><strong>Step 2:</strong> Amazon Cognito authenticates credentials. Then, the user is logged into the web application.</p><p><strong>Step 3a and 3b:</strong></p><ul><li><strong>Step 3a:</strong> Web application (AWS Amplify) subscribes to AWS AppSync Events websocket.</li><li><strong>Step 3b:</strong> AWS AppSync Events websocket calls AWS Lambda authorizer to verify that the user is allowed to subscribe to the web socket.</li></ul><p><strong>Step 4:</strong> User uploads a file (document or image) through the web application.</p><p><strong>Step 5:</strong> Web application (hosted on AWS Amplify) calls Amazon Cognito (identity pool) to verify that the user is allowed to upload files.</p><p><strong>Step 6:</strong> File is uploaded to Amazon S3 bucket.</p><p><strong>Step 7a and 7b:</strong> When receiving an Amazon S3 upload event (notifying that a file has been uploaded to the Amazon S3 bucket) in the default Amazon EventBridge bus, an Amazon EventBridge bus rule triggers AWS Step Functions state machine execution to start the orchestration workflow.</p><p><strong>Step 8 (Extract fields from file and classify file):</strong></p><ul><li><strong>Step 8a:</strong> First AWS Lambda function launches a new Amazon Bedrock Automation task (this task extracts specific fields from the uploaded file and classifies it).</li><li><strong>Step 8b:</strong> After the task completes, results are stored in an Amazon S3 bucket.</li><li><strong>Step 8c and 8d:</strong> When receiving an Amazon S3 event (notifying that results have been stored in the Amazon S3 bucket) on the default Amazon EventBridge, an Amazon EventBridge bus rule triggers execution of an AWS Lambda function.</li><li><strong>Step 8e:</strong> An AWS Lambda function publishes results to the web socket.</li></ul><p><strong>Step 9a and 9b:</strong> Second AWS Lambda function sends a prompt to Amazon Bedrock foundation model (Sonnet 3) to request summarization in the stream of the uploaded file. AWS Lambda function publishes streaming data to the web socket.</p><p>After Step 8e and Step 9b, the user can now view summarization results and file extraction insights for the uploaded file in the web application.</p><h2 id=prerequisites>Prerequisites</h2><p>To implement and set up this solution, you must have the following:</p><ul><li>AWS account</li><li>Device with access to your AWS account with the following:<ul><li>Python 3.12 installed (including pip)</li><li>Node.js 20.12.0 installed</li></ul></li><li>Model Access enabled to Claude 3 Sonnet model in Amazon Bedrock</li></ul><p><strong>Note:</strong> Deploying this solution will incur costs. Please review the pricing page of each AWS service used in this article for cost details. The operating costs of this solution primarily depend on:</p><ul><li>Number of documents (and size of each document)</li><li>Number of active users</li></ul><h2 id=setting-up-amazon-bedrock-data-automation>Setting up Amazon Bedrock Data Automation</h2><p>In this section, we set up an Amazon Bedrock Data Automation project and Amazon Bedrock blueprint.</p><p>A project includes a list of blueprints, and each blueprint defines fields to extract from different file types (such as documents or images). In this article, we will define a blueprint for driver&rsquo;s licenses.</p><p>Complete the following steps to create an Amazon Bedrock Data Automation project and a driver&rsquo;s license blueprint:</p><ol><li><p>Clone the GitHub repository:</p><pre tabindex=0><code>git clone https://github.com/aws-samples/sample-create-idp-with-appsyncevents-and-amazonbedrock.git
</code></pre></li><li><p>Navigate to the <code>sample-create-idp-with-appsyncevents-and-amazonbedrock</code> folder:</p><pre tabindex=0><code>cd sample-create-idp-with-appsyncevents-and-amazonbedrock
</code></pre></li><li><p>Initialize the environment (prepare shell script files from the GitHub repository for use):</p><pre tabindex=0><code>chmod +x ./init-env.sh &amp;&amp; source ./init-env.sh
</code></pre></li><li><p>Run the <code>setup-bda-project.sh</code> script to create an Amazon Bedrock Data Automation project and sample driver&rsquo;s license blueprint:</p><pre tabindex=0><code>./setup-bda-project.sh
</code></pre></li></ol><h2 id=creating-websocket-and-orchestration-backend>Creating websocket and orchestration backend</h2><p>In this section, we create the following resources:</p><ul><li>A user directory for web authentication and authorization, created using Amazon Cognito user pool. An Amazon Cognito identity pool is also created to authenticate that users are allowed to upload files through the web application.</li><li>A websocket using AWS AppSync Events. This allows our web application to receive real-time updates for summarization and extraction results. An authorization layer is also created to protect the websocket from unauthorized users. This layer is implemented with a Lambda authorization function to verify that incoming requests include valid authorization information.</li><li>A state machine using AWS Step Functions and AWS Lambda to orchestrate summarization and extraction operations from unstructured content</li><li>Amazon S3 to store and encrypt AWS Lambda functions.</li></ul><p>Complete the following steps to create the websocket and orchestration backend of the solution, using AWS CloudFormation:</p><ol><li><p>Create the Amazon S3 buckets used by the solution by running the following script. These buckets will store files uploaded by users and code files of AWS Lambda functions used in this solution.</p><pre tabindex=0><code>cd $CURRENT_DIR/s3; ./create-s3-buckets.sh
</code></pre></li><li><p>Create Amazon Cognito user pool and identity pool by running the <code>create-cognito-userpool.sh</code> script:</p><pre tabindex=0><code>cd $CURRENT_DIR/cognito; ./create-cognito-userpool.sh
</code></pre></li><li><p>Create AWS AppSync Events web socket by running the following script:</p><pre tabindex=0><code>cd $CURRENT_DIR/appsync/; ./create-appsync-api.sh
</code></pre></li><li><p>Create AWS Step Functions state machine (including AWS Lambda functions) by running the following scripts:</p><pre tabindex=0><code>cd $CURRENT_DIR/orchestration/; ./create-orchestration.sh
</code></pre></li></ol><h2 id=configuring-amazon-cognito-user-pool>Configuring Amazon Cognito user pool</h2><p>In this section, we will create a user in the Amazon Cognito user pool. This user will log into our web application.</p><p>Run the <code>create-cognito-testuser.sh</code> script command to create a user (make sure to provide your email address):</p><pre tabindex=0><code>cd $CURRENT_DIR/cognito; ./create-cognito-testuser.sh #your-email-address#
</code></pre><p>After you create the user, you will receive an email with a temporary password in this format: &ldquo;Your username is #your-email-address# and temporary password is #temporary-password#.&rdquo;</p><p>Please record these login credentials (email address and temporary password) for later use when testing the web application.</p><h2 id=creating-the-web-application>Creating the web application</h2><p>In this section, we build a web application using AWS Amplify and publish the application so it can be accessed through an endpoint URL.</p><p>Complete the following steps to create the web application:</p><ol><li><p>Run the <code>create-webapp.sh</code> script to create the web application with AWS Amplify:</p><pre tabindex=0><code>cd $CURRENT_DIR/amplify/; ./create-webapp.sh
</code></pre></li><li><p>Run the <code>deploy.sh</code> script to deploy the web application:</p><pre tabindex=0><code>cd $CURRENT_DIR/amplify/amplify-idp; ./deploy.sh
</code></pre></li></ol><p>The web application is now available for testing and a URL will be displayed, as shown in the screenshot below. Please note the URL for use in the next section.</p><h2 id=testing-the-web-application>Testing the web application</h2><p>In this section, we will test the web application and upload a file for processing:</p><ol><li>Open the AWS Amplify application URL in your web browser.</li><li>Enter login credentials (email and temporary password you received earlier when configuring the user pool in Amazon Cognito) and select Sign in.</li><li>When prompted, enter a new password and select Change password.</li><li>You can now see the web interface.</li><li>Download a sample driver&rsquo;s license at this location and upload it through the web application using your camera or a file from your local device, as illustrated.</li><li>After the file is uploaded, you will start receiving feedback in the web application. When all operations are complete, you will see results equivalent to the following screenshot:</li></ol><p><strong>Note:</strong> If you intend to use other sample driver&rsquo;s license images with different formats, you may need to update the existing Bedrock Data Automation blueprint we created earlier or define a new blueprint in the Bedrock Data Automation project we created earlier for these new images to work. For more information, please see Bedrock Data Automation documentation.</p><h2 id=cleanup>Cleanup</h2><p>To ensure no additional costs are incurred, delete the resources that have been provisioned in your account. Make sure you are using the correct AWS account before deleting the following resources.</p><p><strong>Important Note:</strong> You should be careful when performing the steps above. Make sure you are deleting resources in the correct AWS account.</p><p>You can navigate to the AWS CloudFormation console to delete CloudFormation stacks associated with the provisioned resources or use the cleanup helper script <code>cleanup.sh</code> available at the root of the <code>sample-create-idp-with-appsyncevents-and-amazonbedrock</code> directory:</p><pre tabindex=0><code>./cleanup.sh #region#
</code></pre><h2 id=conclusion>Conclusion</h2><p>In this article, we introduced a solution for creating document processing workflows, with a web application using serverless services. Through the web application, we can upload files and receive real-time feedback for different types of operations (summarization, extraction of specific fields, and classification). First, we created an Amazon Bedrock Data Automation project (with a driver&rsquo;s license blueprint). Then, we created a web socket along with an orchestration solution using a state machine (AWS Step Functions and AWS Lambda functions). We also configured a user pool to grant users access to the web application. Finally, we created the user interface (frontend) of the web application on AWS Amplify.</p><p>To dive deeper into this solution, a self-paced workshop is available in AWS Workshop Studio.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../3-blogstranslated/ title="Translated Blogs"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../3-blogstranslated/3.2-blog2/ title="Blog 2" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../js/clipboard.min.js?1765288608></script><script src=../../js/perfect-scrollbar.min.js?1765288608></script><script src=../../js/perfect-scrollbar.jquery.min.js?1765288608></script><script src=../../js/jquery.sticky.js?1765288608></script><script src=../../js/featherlight.min.js?1765288608></script><script src=../../js/highlight.pack.js?1765288608></script><script>hljs.initHighlightingOnLoad()</script><script src=../../js/modernizr.custom-3.6.0.js?1765288608></script><script src=../../js/learn.js?1765288608></script><script src=../../js/hugo-learn.js?1765288608></script><link href=../../mermaid/mermaid.css?1765288608 rel=stylesheet><script src=../../mermaid/mermaid.js?1765288608></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>